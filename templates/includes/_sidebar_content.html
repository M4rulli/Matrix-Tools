<div class="sidebar-header">
    <h4 class="mb-0 d-flex align-items-center">
        <i class="fas fa-calculator me-1"></i>
        <a href="{{ lang_url('') }}" class="text-reset text-decoration-none">Matrix Tools</a>
    </h4>
</div>

<!-- Search Bar -->
<div class="sidebar-search">
    <div class="search-container">
        <i class="fas fa-search search-icon"></i>
        <input type="text" id="sidebarSearch-{{ sidebar_id_suffix }}" class="search-input" placeholder="Cerca algoritmi..." autocomplete="off" oninput="handleSearchInput('{{ sidebar_id_suffix }}', event)">
        <div class="search-clear" id="searchClear-{{ sidebar_id_suffix }}" style="display: none;" onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
            <i class="fas fa-times"></i>
        </div>
    </div>
    <div class="search-results" id="searchResults-{{ sidebar_id_suffix }}" style="display: none;"></div>
</div>

<div class="sidebar-content">
    <!-- Sidebar: Notebook section -->

    <div class="notebook-section">
        <button
            class="notebook-button"
            onclick="openNotebook()"
            title="Apri Quaderno"
        >
            <i class="fas fa-book notebook-icon"></i>
            <span class="notebook-text">Quaderno</span>
            <span class="notebook-count" id="exercise-count-{{ sidebar_id_suffix }}">
                <script>
                    document.write(
                    JSON.parse(localStorage.getItem("mathNotebook") || "[]").length
                    );
                </script>
            </span>
        </button>
    </div>

    <!-- Tutte le sezioni categoria -->
    <div class="category-section">
        <button class="category-header" onclick="toggleSection('controls{{ sidebar_id_suffix }}', event)">
            <div class="category-title">
                <i class="fas fa-cogs category-icon"></i>
                <span>Teoria dei Controlli</span>
            </div>
            <i class="fas fa-chevron-down chevron-icon"></i>
        </button>
        <div class="algorithm-container collapsed" id="controls{{ sidebar_id_suffix }}">
            <ul class="algorithm-list">
                <li>
                    <a href="linearization.html"
                       class="algorithm-link {% if request.path.endswith('linearization.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-project-diagram me-2"></i>
                        <span>Linearizzazione</span>
                    </a>
                </li>
                <li>
                    <a href="spectral-decomposition.html"
                       class="algorithm-link {% if request.path.endswith('spectral-decomposition.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-braille me-2"></i>
                        <span>Decomposizione Spettrale</span>
                    </a>
                </li>
                <li>
                    <a href="differential-equations.html"
                       class="algorithm-link {% if request.path.endswith('differential-equations.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-wave-square me-2"></i>
                        <span>Equazioni Differenziali</span>
                    </a>
                </li>
                <li>
                    <a href="difference-equations.html"
                       class="algorithm-link {% if request.path.endswith('difference-equations.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-step-forward me-2"></i>
                        <span>Equazioni alle Differenze</span>
                    </a>
                </li>
                <li>
                    <a href="dynamical-systems.html"
                       class="algorithm-link {% if request.path.endswith('dynamical-systems.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-sliders-h me-2"></i>
                        <span>Sistemi Dinamici</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <div class="category-section">
        <button class="category-header" onclick="toggleSection('algebra{{ sidebar_id_suffix }}', event)">
            <div class="category-title">
                <i class="fas fa-square-root-alt category-icon"></i>
                <span>Algebra e Logica</span>
            </div>
            <i class="fas fa-chevron-down chevron-icon"></i>
        </button>
        <div class="algorithm-container collapsed" id="algebra{{ sidebar_id_suffix }}">
            <ul class="algorithm-list">
                <li>
                    <a href="modular-powers.html"
                       class="algorithm-link {% if request.path.endswith('modular-powers.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-divide me-2"></i>
                        <span>Potenze Modulari</span>
                    </a>
                </li>
                <li>
                    <a href="hasse-diagram.html"
                       class="algorithm-link {% if request.path.endswith('hasse-diagram.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-cubes me-2"></i>
                        <span>Diagramma di Hasse</span>
                    </a>
                </li>
                <li>
                    <a href="boolean-polynomials.html"
                       class="algorithm-link {% if request.path.endswith('boolean-polynomials.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-project-diagram me-2"></i>
                        <span>Polinomi Booleani</span>
                    </a>
                </li>
                <li>
                    <a href="chinese-remainder-theorem.html"
                       class="algorithm-link {% if request.path.endswith('chinese-remainder-theorem.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-chess-board me-2"></i>
                        <span>Teorema Cinese del Resto</span>
                    </a>
                </li>
                <li>
                    <a href="bezout-identity.html"
                       class="algorithm-link {% if request.path.endswith('bezout-identity.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-equals me-2"></i>
                        <span>Identità di Bézout</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="category-section">
        <button class="category-header" onclick="toggleSection('linearalgebra{{ sidebar_id_suffix }}', event)">
            <div class="category-title">
                <i class="fas fa-border-all category-icon"></i>
                <span>Algebra Lineare</span>
            </div>
            <i class="fas fa-chevron-down chevron-icon"></i>
        </button>
        <div class="algorithm-container collapsed" id="linearalgebra{{ sidebar_id_suffix }}">
            <ul class="algorithm-list">
                <li>
                    <a href="laplace-determinant.html"
                       class="algorithm-link {% if request.path.endswith('laplace-determinant.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-dice-four me-2"></i>
                        <span>Determinante con Laplace</span>
                    </a>
                </li>
                <li>
                    <a href="eigenvalues-eigenvectors.html"
                       class="algorithm-link {% if request.path.endswith('eigenvalues-eigenvectors.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-cubes me-2"></i>
                        <span>Autovalori e Autovettori</span>
                    </a>
                </li>
                <li>
                    <a href="linear-systems.html"
                       class="algorithm-link {% if request.path.endswith('linear-systems.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-equals me-2"></i>
                        <span>Sistemi Lineari</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="category-section">
        <button class="category-header" onclick="toggleSection('ricercaoperativa{{ sidebar_id_suffix }}', event)">
            <div class="category-title">
                <i class="fas fa-chart-line category-icon"></i>
                <span>Ricerca Operativa</span>
            </div>
            <i class="fas fa-chevron-down chevron-icon"></i>
        </button>
        <div class="algorithm-container collapsed" id="ricercaoperativa{{ sidebar_id_suffix }}">
            <ul class="algorithm-list">
                <li>
                    <a href="simplex.html"
                       class="algorithm-link {% if request.path.endswith('simplex.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-table me-2"></i>
                        <span>Metodo del Simplesso</span>
                    </a>
                </li>
                <li>
                    <a href="complementary-conditions.html"
                       class="algorithm-link {% if request.path.endswith('complementary-conditions.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-handshake me-2"></i>
                        <span>Condizioni di Complementarità</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="category-section">
        <button class="category-header" onclick="toggleSection('analisi{{ sidebar_id_suffix }}', event)">
            <div class="category-title">
                <i class="fas fa-chart-area category-icon"></i>
                <span>Analisi Matematica</span>
            </div>
            <i class="fas fa-chevron-down chevron-icon"></i>
        </button>
        <div class="algorithm-container collapsed" id="analisi{{ sidebar_id_suffix }}">
            <ul class="algorithm-list">
                <li>
                    <a href="function-study.html"
                       class="algorithm-link {% if request.path.endswith('function-study.html') %}active{% endif %}"
                       onclick="clearSearch('{{ sidebar_id_suffix }}', event)">
                        <i class="fas fa-wave-square me-2"></i>
                        <span>Studio di Funzione</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>
